DROP DATABASE IF EXISTS DBCOVID;
CREATE DATABASE IF NOT EXISTS DBCOVID;
USE DBCOVID;

CREATE TABLE VACINA (
ID_VACINA INT NOT NULL AUTO_INCREMENT,
PAIS VARCHAR (255),
ESTAGIOS_VACINA INT,
DATA_INICIO DATE,
ID_PESQUISADOR INT,
PRIMARY KEY(ID_VACINA, ID_PESQUISADOR)
);

CREATE TABLE INSTITUICAO (
ID_INSTITUICAO INT NOT NULL AUTO_INCREMENT,
NOME VARCHAR (255),
CNPJ VARCHAR (25),
RUA VARCHAR (255),
NUMERO VARCHAR (25),
BAIRRO VARCHAR (255),
CIDADE VARCHAR (255),
ESTADO VARCHAR (255),
PRIMARY KEY (ID_INSTITUICAO)
);

CREATE TABLE PESQUISADOR (
ID_PESQUISADOR INT NOT NULL AUTO_INCREMENT,
NOME VARCHAR (255),
DATANASCIMENTO DATE,
SEXO VARCHAR(10),
CPF VARCHAR (255),
RUA VARCHAR (255),
NUMERO VARCHAR (10),
BAIRRO VARCHAR (255),
CIDADE VARCHAR (255),
ESTADO VARCHAR (255),
ID_INSTITUICAO INT not null,
PRIMARY KEY(ID_PESQUISADOR),
FOREIGN KEY(ID_INSTITUICAO) REFERENCES INSTITUICAO (ID_INSTITUICAO)
);

CREATE TABLE PESSOA (
ID_PESSOA INT NOT NULL AUTO_INCREMENT,
TIPO_PESSOA INT,
NOME VARCHAR (255),
DATA_NASCIMENTO DATE,
SEXO VARCHAR (10),
CPF VARCHAR (255),
RUA VARCHAR (255),
NUMERO VARCHAR(10),
BAIRRO VARCHAR (255),
CIDADE VARCHAR (255),
ESTADO VARCHAR (255),
JA_VACINADA BOOLEAN ,
REACAO INT,
PRIMARY KEY (ID_PESSOA)
);

CREATE TABLE DESENVOLVER (
ID_PESQUISADOR INT,
ID_VACINA INT,
PRIMARY KEY(ID_PESQUISADOR, ID_VACINA),
FOREIGN KEY(ID_VACINA) REFERENCES VACINA (ID_VACINA),
FOREIGN KEY(ID_PESQUISADOR) REFERENCES PESQUISADOR (ID_PESQUISADOR)
);

CREATE TABLE RECEBER (
ID_VACINA INT,
ID_PESSOA INT,
PRIMARY KEY(ID_VACINA, ID_PESSOA),
FOREIGN KEY(ID_VACINA) REFERENCES VACINA (ID_VACINA),
FOREIGN KEY(ID_PESSOA) REFERENCES PESSOA (ID_PESSOA)
);

INSERT INTO INSTITUICAO (NOME, CNPJ, BAIRRO, RUA, NUMERO, CIDADE, ESTADO) VALUES 
('Instituto de Pesquisa Senac Florianópolis', '00000000000', 'Rio Vermelho', 'Beira Rio', '01', 'Florianópolis', 'SC'),
('Instituto de Educação e Ensino Superior Senac', '11111111111', 'Ingleses', 'Gaivotas', '02', 'Florianópolis', 'PA'),
('Escola Superior Aberta  Brasil', '22222222222', 'Pedra Branca', 'Beira Rio', '03', 'palhoca', 'MA'),
('Instituto de Educação e Ensino', '33333333333', 'Santos Drumont', 'Sítio de Baixo', '12', 'Biguaçu', 'SC');

select * from instituicao;